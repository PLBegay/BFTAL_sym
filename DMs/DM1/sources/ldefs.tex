% substitution
\newcommand{\tightoverset}[2]{%
  \mathop{#2}\limits^{\vbox to -.5ex{\kern-0.75ex\hbox{$#1$}\vss}}}

\newcommand{\subst}[3]{{#3}[{#1}/{#2}]} 
\newcommand{\substall}[3]{{#1}[{#2_i}/{#3_i}]_{_{i=1}}^{^n}}
\newcommand{\substfrom}[5]{{#1}[\tightoverset{\longrightarrow}{{#2_i}/{#3_i}}]_{_{i=#4}}^{^#5}}

%Replay
\newcommand{\replay}{\curvearrowright}
\newcommand{\extract}[1]{\kw{extract}(#1)}
\newcommand{\lreplay}{\overset{l}{\curvearrowright}}
\newcommand{\mapreplay}{\overset{map}{\curvearrowright}}

% Helpful shortcuts
\newcommand{\ie}{i.e.~}
\newcommand{\eg}{e.g.~}

% NEW POPL15 PAPER IGNORE ABOVE FOR NOW

%Types
\newcommand{\tmubig}[2]{\big(#1\big)^{#2}}
\newcommand{\tmu}[2]{(#1)^{#2}}
\newcommand{\tzero}[1]{(#1)^{\vzero}}
\newcommand{\tone}[1]{(#1)^{\vone}}
\newcommand{\tint}{\kw{int}}
\newcommand{\tbool}{\kw{bool}}
\newcommand{\tarr}[3]{#1 \xrightarrow{#3} #2}
\newcommand{\tarrs}[3]{\s{#1} \xrightarrow{\s{#3}} \s{#2}}
\newcommand{\tprod}[2]{#1 \times #2}
\newcommand{\tlist}[3]{\kw{list}\left[#1\right]^{#2}\,#3}
\newcommand{\tlists}[4]{\kw{list}\left[#4{#1}\right]^{#4{#2}}\,#4{#3}}
\newcommand{\tlistL}[3]{\kw{list}\left[#1\right]^{#2}#3}
\newcommand{\tlistb}[1]{\kw{list}\;#1}
\newcommand{\tunit}{\kw{unit}}
\newcommand{\tcint}[1]{\kw{N}[#1]}
\newcommand{\tcarr}[2]{#1 \mathrel{\rightarrow} #2}
\newcommand{\tcprod}[2]{#1 \mathrel{\wedge} #2}
\newcommand{\tforallK}[3]{\forall#1\overset{#3}{::}K.~ #2}
\newcommand{\mytforall}[4]{\forall#1\overset{#3}{::}#4.~ #2}
\newcommand{\tforallG}[4]{\forall#1\overset{#3}{{::}}{#2}.~ #4}
\newcommand{\tforall}[3]{\forall#1\overset{#3}.~ #2}
%\newcommand{\texists}[2]{\exists#1{::} K.~ #2}
\newcommand{\texists}[2]{\exists#1.~ #2}
\newcommand{\hastype}[2]{#1 : #2}
\newcommand{\subtype}[2]{#1\sqsubseteq#2}
\newcommand{\eqtype}[2]{#1\equiv#2}

%Kinds
% \newcommand{\ksize}{\iota}
% \newcommand{\kvar}{\upsilon}
% \newcommand{\kcost}{\omega}
\newcommand{\ksize}{\mathbb{N}}
\newcommand{\kvar}{\mathbb{V}}
\newcommand{\kcost}{\mathbb{R}}
\newcommand{\kfun}[2]{#1\mbox{\ra} #2}
\newcommand{\kfunmon}[2]{#1\xrightarrow{\mbox{mon}} #2}
\newcommand{\kk}{K}
\newcommand{\hk}[2]{#1 \mathrel{::} #2}
\newcommand{\kinded}[1]{#1 \mathrel{::} K}\newcommand{\sized}[1]{#1 \mathrel{::} \iota}
\newcommand{\Int}{\text{Int}}
\newcommand{\Bool}{\text{Bool}}
%Variations 

\newcommand{\scond}[3]{\im{#1}\mathrel{\mbox{?}}\im{#2}\mathrel{\colon}\im{#3}}
%% \newcommand{\vzero}{{0_{\mu}}}
%% \newcommand{\vone}{{1_{\mu}}}
\newcommand{\vzero}{\small{\mathbb{S}}}
\newcommand{\vone}{\small{\mathbb{C}}}
\newcommand{\slam}[2]{\underline{\lambda}#1.#2}
\newcommand{\sapp}[2]{{#1}({#2})}
\newcommand{\spower}[2]{#1^{#2}}
\newcommand{\ssum}[4]{\sum\limits_{#1=#2}^{#3}#4}
\newcommand{\smin}[2]{\kw{min}({#1},{#2})}
\newcommand{\smax}[2]{\kw{max}(#1,#2)}
%Sizes
\newcommand{\szero}{0}
\newcommand{\sone}{1}
\newcommand{\splus}[2]{#1 + #2}
\newcommand{\ssucc}[1]{#1 {+} \sone}
\newcommand{\sminus}[2]{#1 - #2}
\newcommand{\sdiv}[2]{\frac{#1}{#2}}
\newcommand{\smult}[2]{#1\cdot#2}
\newcommand{\splusone}[1]{#1+1}
\newcommand{\sceil}[1]{\ceil*{#1}}
\newcommand{\sfloor}[1]{\floor*{#1}}
\newcommand{\size}[1]{|#1|}
\newcommand{\slog}[1]{\kw{log}_2(#1)}
% \newcommand{\snlog}[1]{\kw{ln}}



%Constraints
\newcommand{\sat}[1]{\models#1}
\newcommand{\ceq}[2]{#1\mathrel{\doteq}#2}
\newcommand{\cleq}[2]{#1 \mathop{\leq} #2}
\newcommand{\clt}[2]{#1 \mathop{<} #2}
\newcommand{\cgt}[2]{#1 \mathop{>} #2}
\newcommand{\ceqz}[1]{#1 \mathrel{\doteq} 0}
\newcommand{\cneg}[1]{\mathop{\neg}#1}
\newcommand{\cand}[2]{#1 \wedge #2}

\newcommand{\blank}[2][100]{\hfil\penalty#1\hfilneg }

%TERMS
\newcommand{\const}[1]{\kw{#1}}
\newcommand{\ic}{\kw{n}}
\newcommand{\bc}{\kw{b}}
\newcommand{\true}{\kw{true}}
\newcommand{\false}{\kw{false}}
\newcommand{\ei}{\im{\mathtt{i}}}
\newcommand{\pair}[2]{\im{({#1},{#2})}}
\newcommand{\fst}[1]{\im{\kw{fst}~{#1}}}
\newcommand{\snd}[1]{\im{\kw{snd}~{#1}}}
\newcommand{\nil}{\im{\kw{nil}}}
%\newcommand{\cons}[2]{\im{\kw{cons}({#1}, {#2})}}
\newcommand{\cons}[2]{\im{\kw{cons}(#1,\,#2)}}

\newcommand{\fix}[3]{\im{\kw{fix}~~#1(#2).\, #3}}
\newcommand{\zero}{\kw{0}}
\renewcommand{\succ}[1]{\kw{succ}~#1}
\newcommand{\Lam}[1]{\Lambda.\, #1}
\newcommand{\lam}[2]{\lambda #1.\,#2}
\newcommand{\App}[1]{#1[]}
\newcommand{\AppM}[1]{#1[*]}
%\newcommand{\pack}[1]{\kw{pack}~#1}
\newcommand{\pack}[1]{\kw{pack}~#1} % ~\kw{as}~ #2

%\newcommand{\unpack}[3]{\kw{unpack}~#1~\kw{as}~#2~\kw{in}~#3}
\newcommand{\unpack}[3]{\kw{unpack}~#1~\kw{as}~#2~\kw{in}~#3}
\newcommand{\unpackin}[2]{\kw{unpack}~#1~\kw{as}~#2~\kw{in}}
%\newcommand{\casel}[5]{\kw{case_L}~#1~\kw{of}~\kw{nil}~\ra~#2~|~\kw{cons}(#3,#4)~\ra~#5}
\newcommand{\casel}[5]{\kw{case_L}~#1~\kw{of}~\kw{nil}~\ra~#2~|~\kw{cons}(#3,#4)~\ra~#5}

\newcommand{\caseof}[1]{\kw{case_L}~#1~\kw{of}}
\newcommand{\ofnil}[1]{~~\kw{nil}~\ra#1}
\newcommand{\ofcons}[3]{|~\kw{cons}(#1,~#2)~\ra~#3}
%aligned case
\newcommand{\caselAl}[7]{\kw{case_L}~#1~\kw{of}~ \kw{nil}~\ra~#2~
\newline|~\kw{cons}(#3,[#5][#6]~#4)~\ra~#7}
\newcommand{\casen}[4]{\kw{case_N}~#1~\kw{of}~\kw{0}~\ra~#2~\vert~\kw{succ}(#3)~\ra~#4}
\newcommand{\letin}[3]{\im{\kw{let}~{#1}\:=\:{#2}~ \kw{in}~{#3}}}
\newcommand{\letx}[2]{\im{\kw{let}~{#1}\:=\:{#2}~ \kw{in}}}
\newcommand{\app}[2]{\im{{#1}~{#2}}}
\newcommand{\plus}[2]{#1 + #2}
\newcommand{\mult}[2]{#1 * #2}
\newcommand{\equal}[2]{#1 = #2}
\newcommand{\zip}[2]{\kw{zip}({#1,#2)}}
\newcommand{\intToBool}[1]{\kw{intToBool}({#1)}}
\newcommand{\unit}{()}
\newcommand{\ccircle}{\circ}
\newcommand{\prim}{\zeta}
\newcommand{\primApp}[2]{#1~#2}
%PATTERNS
\newcommand{\pkeep}[1]{\kw{keep(#1)}}
\newcommand{\pnil}{\kw{nil}}
\newcommand{\punit}{()}
\newcommand{\pnull}{\kw{null}}
\newcommand{\pstable}[1]{\kw{stable}(#1)}
\newcommand{\pzero}{\zero}
\newcommand{\pcint}[1]{\im{{#1}}}
\newcommand{\psucc}[1]{\im{\kw{succ}~{#1}}}
\newcommand{\prepl}[2]{\kw{replace(#1,#2)}}
\newcommand{\ppair}[2]{\im{{(#1},{#2)}}}
\newcommand{\pfst}[1]{\im{\kw{fst}~{#1}}}
\newcommand{\psnd}[1]{\im{\kw{snd}~{#1}}}
\newcommand{\pcons}[2]{\im{\kw{cons}({#1},#2)}}
\newcommand{\pLam}[1]{\Lambda.#1}
\newcommand{\plet}[3]{\im{\kw{let}~{#1}\:=\:{#2}~\kw{in}~{#3}}}
\newcommand{\pfix}[3]{\kw{fix}~#1(#2).#3}
\newcommand{\ppack}[1]{\kw{pack}~#1} % ~\kw{as}~ #2
\newcommand{\pApp}[1]{#1[]}
\newcommand{\pprimApp}[2]{#1~#2}

\newcommand{\papp}[2]{#1 ~#2}
\newcommand{\pcasel}[5]{\kw{case_L}~#1~\kw{of}~\kw{nil}~\ra~#2~|~\kw{cons}(#3,#4)~\ra~#5}
\newcommand{\pcasen}[4]{\kw{case_N}~#1~\kw{of}~\kw{0}~\ra~#2~\vert~\kw{succ}~#3~\ra~#4}
\newcommand{\peq}[2]{#1\equiv#2}
\newcommand{\peqn}[2]{#1\equiv\pnull}
\newcommand{\punpack}[3]{\kw{unpack}~#1~\kw{as}~#2~\kw{in}~#3}

\newcommand{\Mytest}[1]{%
\begin{tabular}{c}
    #1 \\\hline
\end{tabular}%
} 
%% Trace expression pairs used for replay semantics
\newcommand{\trexp}[2] { \bm{\langle} #1, #2 \bm{\rangle}}
\newcommand{\run}[3]{#1 \red #2, #3}
\newcommand{\repexp}[2] { \bm{\langle} #1, #2 \bm{\rangle}}
\newcommand{\trmapexp}[4] { \bm{\langle} #1, #2,#3, #4 \bm{\rangle}}
\newcommand{\trfilterexp}[4] { \bm{\langle} #1, #2,#3, #4 \bm{\rangle}}

\newcommand{\mktrace}[1]{\im{{#1}}}
\newcommand{\tic}{\kw{n}}
\newcommand{\tbc}{\kw{b}}
\newcommand{\trbool}{\mktrace{b}}
\newcommand{\trv}{\mktrace{\cdot}}
\newcommand{\tr}[1]{\kw{#1}}
\newcommand{\trunit}{\mktrace{\unit}}
\newcommand{\trint}{\mktrace{i}}
\newcommand{\trzero}{\mktrace{\zero}}
\newcommand{\trtrue}{\mktrace{true}}
\newcommand{\trfalse}{\mktrace{false}}
\newcommand{\trcons}[2]{\mktrace{\kw{cons}({#1},{#2})}}
\newcommand{\trpair}[2]{\mktrace{({#1},{#2})}}
\newcommand{\treq}[2]{\mktrace{{#1} = {#2}}}
\newcommand{\trfst}[1]{\mktrace{{\kw{fst}}~#1}}
\newcommand{\trsucc}[1]{\mktrace{{\kw{succ}}~#1}}
\newcommand{\trsnd}[1]{\mktrace{{\kw{snd}}~#1}}
\newcommand{\trlet}[3]{\im{\kw{let}~{#1}\:=\:{#2}~\kw{in}~{#3}}}
\newcommand{\trfix}[3]{\mktrace{\kw{fix}#1(#2).#3}}
\newcommand{\trapp}[3]{\mktrace{\kw{app}(#1,#2,#3)}}
\newcommand{\trnil}{\mktrace{\kw{nil}}}
\newcommand{\trcasez}[2]{\mktrace{\kw{case_{\szero}}(#1,#2)}}
\newcommand{\trcases}[2]{\mktrace{\kw{case_s}(#1,#2)}}
\newcommand{\trcasen}[2]{\mktrace{\kw{case_{nil}}(#1,#2)}}
\newcommand{\trcasec}[2]{\mktrace{\kw{case_{cons}}(#1,#2)}}
\newcommand{\trLam}[1]{\mktrace{\Lambda.#1}}
\newcommand{\trApp}[2]{\kw{iapp}(#1,#2)}
\newcommand{\trpack}[1]{\kw{pack}~#1}
\newcommand{\trunpack}[3]{\kw{unpack}~#1~\kw{as}~#2~\kw{in}~#3}
\newcommand{\trprim}[3]{\kw{primApp}(#1,#2,#3)}

\newcommand{\iprim}[1]{\widehat{#1}}

%Typing Judgement
\newcommand{\tyb}[3]{#1:_{#3}#2}
\newcommand{\ty}[3]{\vdash\tyb{#1}{#2}{#3}}

\newcommand{\tyx}[2]{#1:#2}
\newcommand{\kd}[2]{\vdash#1 \mathrel{\dblcolon} #2}
\newcommand{\primctx}{\Upsilon}

%Pattern Typing
%% \newcommand{\pty}[2]{\vdash#1\gg_{\upsilon}#2}
%% \newcommand{\ptye}[3]{\vdash#1\gg_{\varepsilon}^{#3}#2}
\newcommand{\pty}[2]{\vdash#1\gg#2}
\newcommand{\ptye}[3]{\vdash#1\mathrel{\gg_{#3}}#2}

%Shortcuts
\newcommand{\al}{\alpha}
\newcommand{\wf}[1]{\vdash #1~\kw{wf}}

%Right-Left
\renewcommand{\l}[1]{\mbox{L}(#1)}
\renewcommand{\ll}[1]{\mbox{L}(\t \lift{#1})}
\newcommand{\rr}[1]{\mbox{R}(\t \lift{#1})}

\renewcommand{\r}[1]{\mbox{R}(#1)}
\newcommand{\extr}[2]{\kw{extract}(#1)=#2}
\renewcommand{\merge}[2]{\kw{merge}(#1,#2)}
%\newcommand{\lift}[1]{\widehat{ \kw{keep}} (#1)}
\newcommand{\liftPat}[1]{\ulcorner#1\urcorner}
\newcommand{\lift}[1]{\ulcorner#1\urcorner}
\newcommand{\vp}{v\!\!v}
\newcommand{\ep}{e\!e}

%Logical relation
\newcommand{\e}{\varepsilon}
\newcommand{\lr}[1]{\llbracket#1\rrbracket_{v}}
\newcommand{\inlr}[1]{\in~\lr{#1}}
\newcommand{\lre}[2]{\llbracket#1\rrbracket_{\varepsilon}^{#2}}
\newcommand{\inlre}[2]{\in~\lre{#1}{#2}}
\newcommand{\inlres}[3]{\in~\lre{#1}{#3{#2}}}

\newcommand{\relwith}[2]{\{#1~|~#2\}}
\newcommand{\rel}[1]{\{#1\}}
\renewcommand{\d}[1]{\mathcal{D}\llbracket#1\rrbracket}
\newcommand{\dd}[1]{\mathcal{D}\llbracket\Delta\rrbracket}
\newcommand{\gsubst}[1]{\mathcal{G}\llbracket#1\rrbracket}
\newcommand{\inr}[1]{\in \gsubst{#1}}

\newcommand{\maps}[2]{#1\mapsto#2}
\renewcommand{\sin}[2]{#1\in\d{#2}}
\newcommand{\sg}{\upvarsigma\Gamma}
\renewcommand{\t}{\uptheta}

\newcommand{\lreq}[3]{#1=\l{#3}~\wedge~ #2=\r{#3}}
\newcommand{\satis}[2]{#1 \models #2}
\newenvironment{nstabbing}
  {\setlength{\topsep}{0pt}%
   \setlength{\partopsep}{0pt}%
   \tabbing}
  {\endtabbing} 

%Pierre-L�o was here
\newcommand{\myinf}[3]{#1;#2 #3 }
\newcommand{\tu}[5]{\uparrow \tyb{#1}{#2}{#3} \Rightarrow [#4]. #5}
\newcommand{\td}[5]{\downarrow \tyb{#1}{#2}{#3} \Rightarrow [#4]. #5}
\newcommand{\subinf}[3]{#1;#2 \vdash #3}
\newcommand{\issub}[3]{#1 \sqsubseteq #2 \Rightarrow #3}
\newcommand{\unify}[2]{#1 \sqcup #2}
\newcommand{\mykinded}[2]{#1 \overset{#2}{\mathrel{::}} K}
\newcommand{\mykind}[2]{#1 \mathrel{::} #2}
\newcommand{\mykindedlist}[2]{#1 \overset{#2}{\mathrel{::}} [K]}
\newcommand{\mykindedbis}[2]{#1 \overset{#2}{\mathrel{::}} K'}


%APPENDIX
\newcommand{\case}[1]{\item \textbf{#1}\newline}
%\newcommand{\case}[1]{\noindent \textbf{#1}\newline}
\newcommand{\caseM}[1]{\item \textbf{Case} $#1$\newline}

\newcommand{\partline}{\begin{center}---------------------------\end{center}}
\newcommand{\blog}{\kw{log}_2}
\newcommand{\bmin}{\kw{min}}

%%% Local Variables: 
%%% mode: plain-tex
%%% TeX-master: "main"
%%% End: 
